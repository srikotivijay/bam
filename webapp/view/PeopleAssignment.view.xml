<mvc:View xmlns:mvc="sap.ui.core.mvc" xmlns:smartTable="sap.ui.comp.smarttable" xmlns:core="sap.ui.core" xmlns="sap.m" xmlns:u="sap.ui.unified" xmlns:smartFilterBar="sap.ui.comp.smartfilterbar"  xmlns:app="http://schemas.sap.com/sapui5/extension/sap.ui.core.CustomData/1" controllerName="bam.controller.PeopleAssignment" height="100%">
	<App id="peopleAssignment">
		<pages>
			<Page title="{i18n>title}" showNavButton="true" navButtonPress="onNavBack">
				<headerContent>
					<Button id="btnHome" icon="sap-icon://home" tooltip="{i18n>home}" press="onHome"/>
				</headerContent>
				 
				<!-- use this to make the table occupy the available screen height -->
				<VBox fitContainer="true">
					<smartFilterBar:SmartFilterBar id="smartFilterBar" entitySet="V_WEB_PEOPLE_RULES"  search="filterSearch" initialise="filterInitialised">
						<smartFilterBar:controlConfiguration>
							<smartFilterBar:ControlConfiguration key="RULESETS" label="RULESET" index="0" visibleInAdvancedArea="true">
								<smartFilterBar:customControl>
									<ComboBox
											id="cmbRuleSetList"
											showSecondaryValues= "true"
											filterSecondaryValues= "true"
											change="onChangeRuleSet"
											selectedKey="{PeopleAssignmentVM>/SELECTED_PEOPLE_RULESET_SEQ}"
											width="800px"
											items="{
												path: 'PeopleAssignmentVM>/RuleSet'
											}">
										<core:ListItem key="{PeopleAssignmentVM>PEOPLE_RULESET_SEQ}" text="{parts: ['PeopleAssignmentVM>NAME','PeopleAssignmentVM>DESCRIPTION'], formatter: '.formatText'}" additionalText="{PeopleAssignmentVM>PEOPLE_RULESET_SEQ}"/>
									</ComboBox>
								</smartFilterBar:customControl>
							</smartFilterBar:ControlConfiguration>
							<smartFilterBar:ControlConfiguration key="GEO" label="GEOGRAPHY" index="1" visibleInAdvancedArea="true">
								<smartFilterBar:customControl>
									<ComboBox
											id="cmbGeo"
											showSecondaryValues= "true"
											filterSecondaryValues= "true"
											change="onChangeGeo"
											value="{PeopleAssignmentVM>/SELECTED_GEO_NAME}"
											selectedKey="{PeopleAssignmentVM>/SELECTED_GEO_LEVEL}"
											width="800px"
											items="{
												path: 'PeopleAssignmentVM>/GeographySet'
											}">
										<core:ListItem key="{PeopleAssignmentVM>GEO_LEVEL}" text="{PeopleAssignmentVM>NAME}" additionalText="{PeopleAssignmentVM>GEO_LEVEL}"/>
									</ComboBox>
								</smartFilterBar:customControl>
							</smartFilterBar:ControlConfiguration>
							<smartFilterBar:ControlConfiguration key="FUZZY" label="SEARCH" visibleInAdvancedArea="true">
								<smartFilterBar:customControl>
									<Input id="fuzzy" name="fuzzy" maxLength = "50" liveChange="onChange" valueLiveUpdate="true" width="48.5%" value="{PeopleAssignmentVM>/FUZZY}"/>
								</smartFilterBar:customControl>
							</smartFilterBar:ControlConfiguration>
						</smartFilterBar:controlConfiguration>
					</smartFilterBar:SmartFilterBar>
					<smartTable:SmartTable smartFilterId = "smartFilterBar" id="smartTblPeopleAssignment" beforeRebindTable="onBeforeRebindTable" entitySet="V_WEB_PEOPLE_RULES" tableType="Table" useExportToExcel="true" useVariantManagement="true" showFullScreenButton="true" 
					useTablePersonalisation="true" header="People Rules" showRowCount="true" enableAutoBinding="true" app:useSmartField="true" class="sapUiResponsiveContentPadding" ignoreFromPersonalisation="ID"
					initiallyVisibleFields="PEOPLE_RULESET_DESCRIPTION,GEOGRAPHY,PRODUCT_DESCRIPTION,DEMAND_MANAGER,PRODUCT_MANAGER,MARKETING_DIRECTOR,MARKETING_MANAGER,REG_SUPPLY_CHAIN_MANAGER,SUPPLY_CHAIN_MANAGER,MASTER_PLANNER,SUPPLY_CHAIN_PLANNING_SPECIALIST,GLOBAL_LEADER,OBSOLETE"
					dataReceived =  "onDataRecieved">
						<!-- layout data used to make the table growing but the filter bar fixed -->
						<smartTable:layoutData>
								<FlexItemData growFactor="1" baseSize="0%"/>
						</smartTable:layoutData>
					<smartTable:customToolbar> 
		                <OverflowToolbar design="Transparent"> 
		                        <ToolbarSpacer/> 
		                        <!-- <Button id="btnClearFilter" text="Clear" width="100px"  press="onClearFilter" icon="sap-icon://clear-filter" activeIcon="sap-icon://clear-filter"  /> -->
		                        <Button id="btnAdd"  visible="{CUAssignmentVM>/showEditButton}" text="{i18n>addRule}" press="onAdd" icon="sap-icon://add" activeIcon="sap-icon://add"/>
		                        <Button id="btnEdit" visible="{CUAssignmentVM>/showEditButton}" text="{i18n>editRules}" press="onEdit" icon="sap-icon://edit" activeIcon="sap-icon://edit"/>
		                        <Button id="btnApply" visible="{CUAssignmentVM>/showEditButton}" text="{i18n>applyRules}" press="onApply" icon="sap-icon://detail-view" activeIcon="sap-icon://detail-view"/>
		               </OverflowToolbar> 
			       </smartTable:customToolbar>
					</smartTable:SmartTable>
				<items/>
				</VBox>
			</Page>
		</pages>
	</App>
</mvc:View>
