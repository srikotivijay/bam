<mvc:View xmlns:mvc="sap.ui.core.mvc" xmlns:table="sap.ui.table" xmlns:core="sap.ui.core" xmlns="sap.m" xmlns:u="sap.ui.unified" xmlns:app="http://schemas.sap.com/sapui5/extension/sap.ui.core.CustomData/1" controllerName="bam.controller.AddPeopleRules" displayBlock="true">
	<App id="addPeopleRules">
		<pages>
			<Page title="{i18n>title}" showNavButton="true" navButtonPress="onNavBack" class="sapUiResponsiveContentPadding">
				<headerContent>
					<Button id="btnHome" icon="sap-icon://home" tooltip="{i18n>home}" press="onHome"/>
				</headerContent>
				<content>
					<HBox height="100px" alignItems="Center">
						<Text id="lblCuRuleSet" text="Rule Set:"  wrapping="false" width = "120px"/>
						<ComboBox
								id="cmbRuleSetList"
								showSecondaryValues= "true"
								filterSecondaryValues= "true"
								change="onChangeRuleSet"
								value="{/NAME}"
								selectedKey="{/PEOPLE_RULESET_SEQ}"
								width="800px"
								items="{
									path: '/RuleSet'
								}">
							
							<core:ListItem key="{PEOPLE_RULESET_SEQ}" text="{parts: ['NAME','DESCRIPTION'], formatter: '.formatText'}" additionalText="{PEOPLE_RULESET_SEQ}"/>
						</ComboBox>
					</HBox>	
					<table:Table id="rulesTable" rows="{/AssignPeopleRuleVM}" visible="true" width="auto" visibleRowCount="8" selectionMode="None" enableColumnReordering="false">
						<table:columns>
							<table:Column id="clmHdrAction" width="110px" resizable="false">
								<Label text="{i18n>action}" id="lblAction"/>
								<table:template>
									<HBox alignContent="Start" direction="Inherit" alignItems="Baseline">
										<Button id="btnRemoveRow" icon="sap-icon://delete" visible="{path: 'createNew', formatter: '.disableControl'}" press="onRemoveRow" class="sapUiTinyMarginEnd"/>
										<core:Icon id="btnAddRow" src="sap-icon://add" visible="{path: 'createNew', formatter: '.enableControl'}" press="onAddRow"/>
										<Button visible="{path: 'isError'}" icon="sap-icon://error" press="showErrorMessage" app:text="{errorSummary}" tooltip="{i18n>errorIcon}" type="Reject"/>				            	
									</HBox>
								</table:template>
							</table:Column>
							<table:Column id="clmHdrGeography" width="370px" resizable="false">
								<Label text="{i18n>geography}" id="lblGeography"/>
								<table:template>
									<ComboBox
										id="cmbGeography"
									    change ="onChangeGeo"
										showSecondaryValues= "true"
										filterSecondaryValues= "true"
										value="{NAME}"
										selectedKey="{LEVEL_ID}"
										width="500px"
										items="{path :'/Geography', templateShareable : true}"
										visible="{path: 'createNew', formatter: '.disableControl'}"
										valueState="{geographyErrorState}">
										<core:ListItem key="{LEVEL_ID}" text="{NAME}"/>
									</ComboBox>
								</table:template>
							</table:Column>
							<table:Column id="clmHdrProduct" width="350px" resizable="false">
								<Label text="{i18n>product}" id="lblProduct"/>
								<table:template>
									<HBox alignItems="Center">
									<ComboBox
											id="cmbProduct"
											change ="onChange"
											showSecondaryValues= "true"
											filterSecondaryValues= "true"
											value="{PRODUCT_DESC}"
											selectedKey="{PRODUCT_CODE}"
											width="{/ProductDropdownWidth}"
											items="{
												path: '/AssignPeopleRuleVM/Product',
												templateShareable : true,
												suspended: true
											}"
											loadItems="handleLoadItems"
											visible="{path: 'createNew', formatter: '.disableControl'}"
									 	    valueState="{productErrorState}">
										<core:ListItem key="{PRODUCT_CODE}" text="{PRODUCT_DESC}" additionalText="{PRODUCT_CODE}"/>
									</ComboBox>
									<Button id="btnSearchProduct" icon="sap-icon://search" visible="{path: 'productLookupVisibility', formatter: '.enableControl'}" press="onProductSearch" class="sapUiTinyMarginEnd"/>
									</HBox>
								</table:template>
							</table:Column>		
							<table:Column id="clmHdrDemandManager" width="350px" resizable="false" visible="{/showDemandManager}">
								<Label text="{i18n>DEMAND_MANAGER}" id="lblDemandManager"/>
								<table:template>
									<HBox alignItems="Center">
									<ComboBox
											id="cmbDemandManager"
											showSecondaryValues= "true"
											filterSecondaryValues= "true"
											value="{DEMAND_MANAGER_NAME}"
											selectedKey="{DEMAND_MANAGER_ID}"
											width="300px"
											items="{
												path: '/AssignPeopleRuleVM/DemandManager',
												templateShareable : true
											}"
											visible="{path: 'createNew', formatter: '.disableControl'}"
											valueState="{demandManagerErrorState}">
										<core:ListItem key="{USER_ID}" text="{USER_NAME}" additionalText="{USER_ID}"/>
									</ComboBox>
									<Button id="btnSearchDemandManger" icon="sap-icon://search" visible="{path: 'createNew', formatter: '.disableControl'}" press="onSearch" class="sapUiTinyMarginEnd"/>
									</HBox>
								</table:template>
							</table:Column>	
							<table:Column id="clmHdrGlobalLeader" width="350px" resizable="false" visible="{/showGlobalLeader}">
								<Label text="{i18n>HDR_GLOBAL_LEADER}" id="lblGlobalLeader"/>
								<table:template>
									<HBox alignItems="Center">
									<ComboBox
											id="cmbGlobalLeader"
											showSecondaryValues= "true"
											filterSecondaryValues= "true"
											value="{GLOBAL_LEADER_NAME}"
											selectedKey="{GLOBAL_LEADER_ID}"
											width="300px"
											items="{
												path: '/AssignPeopleRuleVM/GlobalBusinessLeader',
												templateShareable : true
											}"
											visible="{path: 'createNew', formatter: '.disableControl'}"
											valueState="{globalLeaderErrorState}">
										<core:ListItem key="{USER_ID}" text="{USER_NAME}" additionalText="{USER_ID}"/>
									</ComboBox>
									<Button id="btnSearchGlobalLeader" icon="sap-icon://search" visible="{path: 'createNew', formatter: '.disableControl'}" press="onSearch" class="sapUiTinyMarginEnd"/>
									</HBox>
								</table:template>
							</table:Column>	
							<table:Column id="clmHdrMarketingDirector" width="350px" resizable="false" visible="{/showMarketingDirector}">
								<Label text="{i18n>HDR_MARKETING_DIRECTOR}" id="lblMarketingDirector"/>
								<table:template>
									<HBox alignItems="Center">
									<ComboBox
											id="cmbMarketingDirector"
											showSecondaryValues= "true"
											filterSecondaryValues= "true"
											value="{MARKETING_DIRECTOR_NAME}"
											selectedKey="{MARKETING_DIRECTOR_ID}"
											width="300px"
											items="{
												path: '/AssignPeopleRuleVM/MarketingDirector',
												templateShareable : true
											}"
											visible="{path: 'createNew', formatter: '.disableControl'}"
											valueState="{marketingDirectorErrorState}">
										<core:ListItem key="{USER_ID}" text="{USER_NAME}" additionalText="{USER_ID}"/>
									</ComboBox>
									<Button id="btnSearchMarketingDirector" icon="sap-icon://search" visible="{path: 'createNew', formatter: '.disableControl'}" press="onSearch" class="sapUiTinyMarginEnd"/>
									</HBox>
								</table:template>
							</table:Column>	
							<table:Column id="clmHdrMarketingManager" width="350px" resizable="false" visible="{/showMarketingManger}">
								<Label text="{i18n>HDR_MARKETING_MANAGER}" id="lblMarketingManager"/>
								<table:template>
									<HBox alignItems="Center">
									<ComboBox
											id="cmbMarketingManager"
											showSecondaryValues= "true"
											filterSecondaryValues= "true"
											value="{MARKETING_MANAGER_NAME}"
											selectedKey="{MARKETING_MANAGER_ID}"
											width="300px"
											items="{
												path: '/AssignPeopleRuleVM/MarketingManager',
												templateShareable : true
											}"
											visible="{path: 'createNew', formatter: '.disableControl'}"
											valueState="{marketingManagerErrorState}">
										<core:ListItem key="{USER_ID}" text="{USER_NAME}" additionalText="{USER_ID}"/>
									</ComboBox>
									<Button id="btnSearchMarketingManager" icon="sap-icon://search" visible="{path: 'createNew', formatter: '.disableControl'}" press="onSearch" class="sapUiTinyMarginEnd"/>
									</HBox>
								</table:template>
							</table:Column>	
							<table:Column id="clmHdrMasterPlanner" width="350px" resizable="false" visible="{/showMasterPlanner}">
								<Label text="{i18n>MASTER_PLANNER}" id="lblMasterPlanner"/>
								<table:template>
									<HBox alignItems="Center">
									<ComboBox
											id="cmbMasterPlanner"
											showSecondaryValues= "true"
											filterSecondaryValues= "true"
											value="{MASTER_PLANNER_NAME}"
											selectedKey="{MASTER_PLANNER_ID}"
											width="300px"
											items="{
												path: '/AssignPeopleRuleVM/MasterPlanner',
												templateShareable : true
											}"
											visible="{path: 'createNew', formatter: '.disableControl'}"
											valueState="{masterPlannerErrorState}">
										<core:ListItem key="{USER_ID}" text="{USER_NAME}" additionalText="{USER_ID}"/>
									</ComboBox>
									<Button id="btnSearchMasterPlanner" icon="sap-icon://search" visible="{path: 'createNew', formatter: '.disableControl'}" press="onSearch" class="sapUiTinyMarginEnd"/>
									</HBox>
								</table:template>
							</table:Column>	
							<table:Column id="clmHdrProductManager" width="350px" resizable="false" visible="{/showProductManager}">
								<Label text="{i18n>PRODUCT_MANAGER}" id="lblProductManger"/>
								<table:template>
									<HBox alignItems="Center">
									<ComboBox
											id="cmbProductManager"
											showSecondaryValues= "true"
											filterSecondaryValues= "true"
											value="{PRODUCT_MANAGER_NAME}"
											selectedKey="{PRODUCT_MANAGER_ID}"
											width="300px"
											items="{
												path: '/AssignPeopleRuleVM/ProductManager',
												templateShareable : true
											}"
											visible="{path: 'createNew', formatter: '.disableControl'}"
											valueState="{productManagerErrorState}">
										<core:ListItem key="{USER_ID}" text="{USER_NAME}" additionalText="{USER_ID}"/>
									</ComboBox>
									<Button id="btnSearchProductManager" icon="sap-icon://search" visible="{path: 'createNew', formatter: '.disableControl'}" press="onSearch" class="sapUiTinyMarginEnd"/>
									</HBox>
								</table:template>
							</table:Column>		
							<table:Column id="clmHdrRegionalSupplyChainManager" width="350px" resizable="false" visible="{/showRegionalSupplychainManager}">
								<Label text="{i18n>REG_SUPPLY_CHAIN_MANAGER}" id="lblRegionalSupplyChainManager"/>
								<table:template>
									<HBox alignItems="Center">
									<ComboBox
											id="cmbRegionalSupplyChainManager"
											showSecondaryValues= "true"
											filterSecondaryValues= "true"
											value="{REGIONAL_SUPPLY_CHAIN_MANAGER_NAME}"
											selectedKey="{REGIONAL_SUPPLY_CHAIN_MANAGER_ID}"
											width="300px"
											items="{
												path: '/AssignPeopleRuleVM/RegionalSupplyChainManager',
												templateShareable : true
											}"
											visible="{path: 'createNew', formatter: '.disableControl'}"
											valueState="{regionalSupplyChainMangerErrorState}">
										<core:ListItem key="{USER_ID}" text="{USER_NAME}" additionalText="{USER_ID}"/>
									</ComboBox>
									<Button id="btnSearchRegSupplyChainManager" icon="sap-icon://search" visible="{path: 'createNew', formatter: '.disableControl'}" press="onSearch" class="sapUiTinyMarginEnd"/>
									</HBox>
								</table:template>
							</table:Column>	
							<table:Column id="clmHdrSupplyChainManager" width="350px" resizable="false" visible="{/showSupplyChainManager}">
								<Label text="{i18n>HDR_SUPPLY_CHAIN_MANAGER}" id="lblSupplyChainManager"/>
								<table:template>
									<HBox alignItems="Center">
									<ComboBox
											id="cmbSupplyChainManager"
											showSecondaryValues= "true"
											filterSecondaryValues= "true"
											value="{SUPPLY_CHAIN_MANAGER_NAME}"
											selectedKey="{SUPPLY_CHAIN_MANAGER_ID}"
											width="300px"
											items="{
												path: '/AssignPeopleRuleVM/SupplyChainManager',
												templateShareable : true
											}"
											visible="{path: 'createNew', formatter: '.disableControl'}"
											valueState="{supplyChainManagerErrorState}">
										<core:ListItem key="{USER_ID}" text="{USER_NAME}" additionalText="{USER_ID}"/>
									</ComboBox>
									<Button id="btnSupplyChainManager" icon="sap-icon://search" visible="{path: 'createNew', formatter: '.disableControl'}" press="onSearch" class="sapUiTinyMarginEnd"/>
									</HBox>
								</table:template>
							</table:Column>	
							<table:Column id="clmHdrSupplyChainPlanningSpecialist" width="350px" resizable="false" visible="{/showSupplyChainPlanningSpecialist}">
								<Label text="{i18n>HDR_SUPPLY_CHAIN_PLANNING_SPECIALIST}" id="lblSupplyChainPlanningSpecialist"/>
								<table:template>
									<HBox alignItems="Center">
									<ComboBox
											id="cmbSupplyChainPlanningSpecialist"
											showSecondaryValues= "true"
											filterSecondaryValues= "true"
											value="{SUPPLY_CHAIN_PLANNING_SPECIALIST_NAME}"
											selectedKey="{SUPPLY_CHAIN_PLANNING_SPECIALIST_ID}"
											width="300px"
											items="{
												path: '/AssignPeopleRuleVM/SupplyChainPlanningSpecialist',
												templateShareable : true
											}"
											visible="{path: 'createNew', formatter: '.disableControl'}"
											valueState="{supplyChainPlanningSpecialistErrorState}">
										<core:ListItem key="{USER_ID}" text="{USER_NAME}" additionalText="{USER_ID}"/>
									</ComboBox>
									<Button id="btnSupplyChainPlanningSpecialist" icon="sap-icon://search" visible="{path: 'createNew', formatter: '.disableControl'}" press="onSearch" class="sapUiTinyMarginEnd"/>
									</HBox>
								</table:template>
							</table:Column>								
						</table:columns>	
					</table:Table>	
					<Toolbar width="100%" id="tbrSubmit">
						<content>
							<ToolbarSpacer id="tbrSpSubmit"/>
							<Button text="{i18n>submit}" width="100px" id="btnSubmit" press="onSubmit" ></Button>
							<Button text="{i18n>cancel}" width="100px" id="btnCancel" press="onCancel" ></Button>
						</content>
					</Toolbar>
				</content>
			</Page>
		</pages>
	</App>
</mvc:View>