<mvc:View xmlns:mvc="sap.ui.core.mvc" xmlns:table="sap.ui.table" xmlns:core="sap.ui.core" xmlns="sap.m" xmlns:u="sap.ui.unified" xmlns:app="http://schemas.sap.com/sapui5/extension/sap.ui.core.CustomData/1" controllerName="bam.controller.AddCURules" displayBlock="true">
	<App id="addCURules">
		<pages>
			<Page title="{i18n>title}" showNavButton="true" navButtonPress="onNavBack" class="sapUiResponsiveContentPadding">
				<headerContent>
					<Button id="btnHome" icon="sap-icon://home" tooltip="{i18n>home}" press="onHome"/>
				</headerContent>
				<content>
				<HBox height="100px" alignItems="Center">
				<Text id="lblCuRuleSet" text="Rule Set:"  wrapping="false" width = "120px"/>
				<ComboBox
						id="cmbRuleSetList"
						showSecondaryValues= "true"
						filterSecondaryValues= "true"
						change="onChangeRuleSet"
						value="{/NAME}"
						selectedKey="{/CU_RULESET_SEQ}"
						width="800px"
						items="{
							path: '/AssignRuleVM/RuleSet',
							sorter: { path: 'text' }
						}">
					
					<core:ListItem key="{CU_RULESET_SEQ}" text="{parts: ['NAME','DESCRIPTION'], formatter: '.formatText'}" additionalText="{CU_RULESET_SEQ}"/>
				</ComboBox>
				</HBox>	
				<table:Table id="rulesTable" rows="{/AssignRuleVM}" visible="true" width="auto" visibleRowCount="8" selectionMode="None" enableColumnReordering="false">
					<table:columns>
						<table:Column id="clmHdrAction" width="110px" resizable="false">
							<Label text="{i18n>action}" id="lblAction"/>
							<table:template>
								<HBox alignContent="Start" direction="Inherit" alignItems="Baseline">
									<Button id="btnRemoveRow" icon="sap-icon://delete" visible="{path: 'createNew', formatter: '.disableControl'}" press="onRemoveRow" class="sapUiTinyMarginEnd"/>
									<core:Icon id="btnAddRow" src="sap-icon://add" visible="{path: 'createNew', formatter: '.enableControl'}" press="onAddRow"/>
									<Button visible="{path: 'isError'}" icon="sap-icon://error" press="showErrorMessage" app:text="{errorSummary}" tooltip="{i18n>errorIcon}" type="Reject"/>				            	
								</HBox>
							</table:template>
						</table:Column>
						<table:Column id="clmHdrGeography" width="280px" resizable="false">
							<Label text="{i18n>geography}" id="lblGeography"/>
							<table:template>
								<ComboBox
									id="cmbGeography"
								    change ="onChange"
									showSecondaryValues= "true"
									filterSecondaryValues= "true"
									value="{NAME}"
									selectedKey="{LEVEL_ID}"
									width="500px"
									items="{path :'/AssignRuleVM/Geography', templateShareable : true}"
									visible="{path: 'createNew', formatter: '.disableControl'}"
									valueState="{geographyErrorState}">
								<core:ListItem key="{LEVEL_ID}" text="{NAME}"/>
							</ComboBox>
					</table:template>
							
						</table:Column>
						<table:Column id="clmHdrProduct" width="280px" resizable="false">
							<Label text="{i18n>product}" id="lblProduct"/>
							<table:template>
								<ComboBox
										id="cmbProduct"
										change ="onChange"
										showSecondaryValues= "true"
										filterSecondaryValues= "true"
										value="{PRODUCT_DESC}"
										selectedKey="{PRODUCT_CODE}"
										width="500px"
										items="{
											path: '/AssignRuleVM/Product',
											templateShareable : true
										}"
										visible="{path: 'createNew', formatter: '.disableControl'}"
								 	    valueState="{productErrorState}">
									<core:ListItem key="{PRODUCT_CODE}" text="{PRODUCT_DESC}" additionalText="{PRODUCT_CODE}"/>
								</ComboBox>
							</table:template>
						</table:Column>		
						<table:Column id="clmHdrCU" width="270px" resizable="false">
							<Label text="{i18n>cu}" id="lblCu"/>
							<table:template>
								<ComboBox
										id="cmbCU"
										showSecondaryValues= "true"
										filterSecondaryValues= "true"
									    change="onChangeCU"
										value="{RCU_DESC}"
										selectedKey="{RCU_CODE}"
										width="500px"
										items="{
											path: '/AssignRuleVM/RCU',
											templateShareable : true
										}"
										visible="{path: 'createNew', formatter: '.disableControl'}"
										valueState="{cuErrorState}">
									<core:ListItem key="{RCU_CODE}" text="{RCU_DESC}" additionalText="{RCU_CODE}"/>
								</ComboBox>
							</table:template>
						</table:Column>	
						<table:Column id="clmHdrSubCu" width="270px" resizable="false">
							<Label text="{i18n>subCU}" id="lblSubCu"/>
							<table:template>
								<ComboBox
										id="cmbSubCU"
										showSecondaryValues= "true"
										filterSecondaryValues= "true"
										value="{SUB_RCU_DESC}"
										selectedKey="{SUB_RCU_CODE}"
										width="500px"
										items="{
											path: '/AssignRuleVM/SubRCU',
											templateShareable : true
										}"
										visible="{path: 'createNew', formatter: '.disableControl'}"
										valueState="{subcuErrorState}">
									<core:ListItem key="{SUB_RCU_CODE}" text="{SUB_RCU_DESC}" additionalText="{SUB_RCU_CODE}"/>
								</ComboBox>
							</table:template>
						</table:Column>							
					</table:columns>	
				</table:Table>				
				<Toolbar width="100%" id="tbrSubmit">
					<content>
						<ToolbarSpacer id="tbrSpSubmit"/>
						<Button text="{i18n>submit}" width="100px" id="btnSubmit" press="onSubmit" ></Button>
						<Button text="{i18n>cancel}" width="100px" id="btnCancel" press="onCancel" ></Button>
					</content>
				</Toolbar>
				
			</content>
			</Page>
		</pages>
	</App>
</mvc:View>